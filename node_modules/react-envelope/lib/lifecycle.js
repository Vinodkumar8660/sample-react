'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = lifecycle;

var _getEnhancedComponent = require('./utils/getEnhancedComponent');

var _getEnhancedComponent2 = _interopRequireDefault(_getEnhancedComponent);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var methods = ['componentDidMount', 'shouldComponentUpdate', 'componentDidUpdate', 'componentWillUnmount'];

function lifecycle(defineLifecycleHooks) {
  return function (BaseComponent) {
    var EnhancedComponent = (0, _getEnhancedComponent2.default)(BaseComponent);

    function prepareLifecycle() {
      var _this = this;

      // check if state is defined
      var state = this.createAdvancedState ? this.createAdvancedState() : undefined;

      // define lifecycle hooks
      var hooks = defineLifecycleHooks(this.props, state);

      // add lifecycle hook functions to component
      Object.keys(methods).forEach(function (key) {
        if (hooks[key]) _this[key] = hooks[key];
      });
    }

    // prototype
    EnhancedComponent.prototype.prepareLifecycle = prepareLifecycle;

    return EnhancedComponent;
  };
}