export default function makePromiseState() {
  return {
    initial: {
      loading: false,
      error: null,
    },
    mutators: setState => ({
      execute: (promise) => {
        setState({
          loading: true,
          error: null,
        });

        promise
          .then(() => {
            setState({
              loading: false,
              error: null,
            });
          })
          .catch((error: string) => {
            setState({
              loading: false,
              error,
            });
          });
      },
    }),
  };
}
